@model IEnumerable<leodacosta02.Models.CommentModel.CommentModel>

<a href="@Url.Action("Create", "Comment")" class="btn btn-primary mb-3">Create new comment</a>
<ul class="list-group">
    @foreach (var comment in Model)
    {
        <li class="list-group-item">
            <div class="d-flex justify-content-between">
                <div>
                    <h5 class="fw-bold">@comment.User</h5>
                    <p class="mb-1">@comment.Text</p>
                    <small class="text-muted">@comment.CreatedAt.ToString("g")</small>
                    <p class="mb-1 text-muted">Replies: @comment.RepliesCount</p>
                </div>
                <div class="d-flex align-items-center gap-2 m-2">
                    <a href="#" class="text-muted" title="Reply">
                        <i class="bi bi-reply"></i>
                    </a>
                    <a href="/Comment/Details/@comment.CommentId" class="text-muted" title="View">
                        <i class="bi bi-eye"></i>
                    </a>
                    <a href="#" class="text-muted" title="Edit" data-bs-toggle="modal" data-bs-target="#editCommentModal">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <a href="#" class="text-muted" title="Delete" onclick="confirmDelete(@comment.CommentId)">
                        <i class="bi bi-trash"></i>
                    </a>
                </div>
            </div>
            @if (comment.Replies.Any())
            {
                <ul class="list-group mt-2 ms-4">
                    @foreach (var reply in comment.Replies)
                    {
                        <li class="list-group-item">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="fw-bold">@reply.User</h6>
                                    <p class="mb-1">@reply.Text</p>
                                    <small class="text-muted">@reply.CreatedAt.ToString("g")</small>
                                </div>
                                <div class="d-flex align-items-center gap-2 m-2">
                                    <a href="#" class="text-muted" title="Reply">
                                        <i class="bi bi-reply"></i>
                                    </a>
                                    <a href="/Comment/Details/@reply.CommentId" class="text-muted" title="View">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                    <a href="#" class="text-muted" title="Edit" data-bs-toggle="modal" data-bs-target="#editReplyModal">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <a href="#" class="text-muted" title="Delete" onclick="confirmDelete(@reply.CommentId)">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            }
        </li>
    }
</ul>



